var _createClass = function () { function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } return function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e } }(); function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } var Product = function () { function a(e, t, n, i) { _classCallCheck(this, a), this.isSelected = e, this.isDisabled = n, this.fatherElement = t, this.classList = t.classList, this.annotation = t.nextElementSibling } return _createClass(a, [{ key: "changeProductCondition", value: function (e, t, n) { if (this.isSelected = t, this.isSelected) return "click" === n ? this.fatherElement.addEventListener("mouseleave", this.makeSelected) : this.makeSelected(e); this.isSelected || (this.classList.remove("product--selected"), this.annotation.firstElementChild.textContent = "Чего сидишь? Порадуй котэ,", this.fatherElement.removeEventListener("mouseleave", this.makeSelected)) } }, { key: "changeLinkCondition", value: function (e) { e.preventDefault(), this.makeSelected(e) } }, { key: "makeSelected", value: function (e) { if (e.preventDefault(), e.target.classList.contains("product__link")) return e.target.previousElementSibling.textContent = e.target.parentElement.dataset.text, void this.classList.add("product--selected"); e.currentTarget.nextElementSibling.firstElementChild.textContent = e.currentTarget.nextElementSibling.dataset.text, this.classList.add("product--selected") } }, { key: "makeDisabled", value: function (e) { if (this.isDisabled = e, this.isDisabled) { var t = this.fatherElement.children[2].textContent; this.annotation.firstElementChild.textContent = "Печалька, " + t + " закончился." } } }]), a }(); !function () { var e = [], t = document.querySelectorAll(".product__wrapper"), n = document.querySelectorAll(".product__link"), i = null !== document.ontouchstart ? "click" : "touchstart"; for (var a in t) isNaN(a) || (e.push(new Product(!1, t[a], t[a].classList.contains("product--disabled"))), t[a].addEventListener(i, r)); for (var s in n) isNaN(s) || n[s].addEventListener("click", c); function r(t) { e.forEach(function (e) { t.currentTarget !== e.fatherElement || e.isDisabled || (t.currentTarget.classList.contains("product--selected") ? e.changeProductCondition(t, !1) : e.changeProductCondition(t, !0, i)) }) } function c(t) { e.forEach(function (e) { t.target.classList.contains("product__link") && t.target.parentElement.previousElementSibling === e.fatherElement && e.changeLinkCondition(t) }) } document.addEventListener("DOMContentLoaded", function () { e.forEach(function (e) { e.classList.contains("product--disabled") && e.makeDisabled(!0) }) }) }();

